@using Microsoft.AspNetCore.Mvc.Rendering

@{
    var controller = ViewContext.RouteData.Values["controller"].ToString();
    var action = ViewContext.RouteData.Values["action"].ToString();
    var currentModel = Global._currentSelectedModel;
    var listModels = Global.ListModels;
    var currentMode = Global.Mode;
}

<div id="header-control" class="@(action == "History" ? "mt-3" : "") d-flex justify-content-between">
    <div id="time" class="d-flex align-items-center">
        <div id="date">
            Thursday, Jan 01, 1970
        </div>
        <div id="current-time">
            00:00:00
        </div>
    </div>

    @if (action == "Index" && controller == "Home")
    {
        <div id="action" class="d-flex align-items-center">
            <div class="d-flex align-items-center" style="margin-right: 1.5em">
                <label for="select-model d-inline-block mr-5" style="margin-right: 10px;font-weight: bold">Model</label>
                <select id="select-model" class="form-select" asp-for="@currentModel">
                    <option value="" selected disabled>Choose Model</option>
                    @foreach (var item in listModels)
                    {
                        <option value="@item">@item</option>
                    }
                </select>
                <button class="btn btn-secondary btn-reload-model" style="margin-left: 10px">Reload</button>
            </div>
            <button type="button" class="btn btn-warning btn-clear-data" data-toggle="modal" data-target="#exampleModal1" style="margin-right: 1.5em;color:white;">
                Clear Data
            </button>

            <div class="modal fade" id="exampleModal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title fw-bold" style="font-size: 18px;" id="exampleModalLabel">Do you want to clear data?</h4>
                            <button type="button" class="btn close" data-dismiss="modal" aria-label="Close">
                                X
                            </button>
                        </div>

                        <form asp-action="ClearData" asp-controller="Home" method="post">
                            <div class="modal-footer" style="border-top: none">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                <button type="submit" class="btn btn-primary btn-apply-target">OK</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div id="action-form-search">
                <button type="button" class="btn btn-primary px-4" data-toggle="modal" data-target="#modalSearch">
                    Search
                </button>

                <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-xl" role="document" style="min-width: 95rem">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4 class="modal-title fw-bold" style="font-size: 18px;" id="exampleModalLabel">Search</h4>
                                <button type="button" class="btn close" data-dismiss="modal" aria-label="Close">
                                    X
                                </button>
                            </div>

                            <div class="modal-body">
                                <div class="d-flex justify-content-center align-items-center">
                                    <div style="margin-right: 10px;">
                                        <label class="label-input-time" for="form-search-model">Model</label>
                                        <select id="form-search-model">
                                            <option value="" selected>Choose Model</option>
                                            @foreach (var item in listModels)
                                            {
                                                <option value="@item">@item</option>
                                            }
                                        </select>
                                    </div>
                                    <div>
                                        <label for="start" class="label-input-time" id="label-start">From:</label>
                                        <input type="date" class="input-date-time" id="start-date" value="@(DateTime.Now.ToString("yyyy-MM-dd"))" />
                                        <input type="time" class="input-date-time" id="start-time" value="00:00" min="00:00" max="23:59" required />
                                    </div>

                                    <div style="margin-left: 2em">
                                        <label for="end" class="label-input-time">To:</label>
                                        <input type="date" class="input-date-time" id="end-date" value="@(DateTime.Now.ToString("yyyy-MM-dd"))" />
                                        <input type="time" class="input-date-time" id="end-time" value="23:59" min="00:00" max="23:59" required />
                                    </div>

                                    <button class="btn btn-primary px-5 form-search-btn-search" style="margin-left: 2em">Search</button>
                                </div>

                                <div class="content mt-2">
                                    <h4 id="content-title" class="fw-bold text-dark mt-1 mb-3">Result</h4>

                                    <div class="d-flex">
                                        <div id="overview-result">
                                            <div class="counting bg-white">
                                                <div class="first-row d-flex align-items-center justify-content-between">
                                                    <div class="lbl-counting">Counting</div>
                                                    <div class="lbl-tray-total">
                                                        Tray Total
                                                    </div>
                                                    <div class="lbl-number" id="form-search-total-tray-ea">0</div>
                                                </div>

                                                <div class="second-row d-flex align-items-center justify-content-between mb-2">
                                                    <div class="title">Total</div>
                                                    <div class="w-100 total" id="form-search-total-ea">0<span class="">EA</span></div>
                                                </div>

                                                <div class="third-row d-flex align-items-center justify-content-between mb-2">
                                                    <div class="title">OK</div>
                                                    <div class="w-100 total">
                                                        <div class="d-inline-block" id="form-search-total-ok-ea">0<span class="">EA</span></div>
                                                        <span class="percent" id="form-search-percent-ok">0 %</span>
                                                    </div>
                                                </div>

                                                <div class="fourth-row d-flex align-items-center justify-content-between mb-2">
                                                    <div class="title">NG</div>
                                                    <div class="w-100 total">
                                                        <div class="d-inline-block" id="form-search-total-ng-ea">0<span class="">EA</span></div>
                                                        <span class="percent" id="form-search-percent-ng">0 %</span>
                                                    </div>
                                                </div>

                                                <div class="fifth-row d-flex align-items-center justify-content-between mb-2">
                                                    <div class="title">Empty</div>
                                                    <div class="w-100 total">
                                                        <div class="d-inline-block" id="form-search-total-empty-ea">
                                                            0<span>EA</span>
                                                        </div>
                                                        <span class="percent" id="form-search-percent-empty">0 %</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div id="list-result" style="width: 74%; margin-left: 10px;border: 1px solid #a1a8f6;overflow-y: scroll; height: 490px; overflow-x: hidden ">
                                            <table class="table table-hover" style="border-radius: -29px; border-radius: 3px;">
                                                <thead style="background: #D9E2FF;">
                                                    <tr style="font-size: 14px; color: #323232; font-weight: 600;">
                                                        <th scope="col">Id</th>
                                                        <th scope="col">DateTime</th>
                                                        <th scope="col">Model</th>
                                                        <th scope="col">Tray</th>
                                                        <th scope="col">Position</th>
                                                        <th scope="col">Result</th>
                                                        <th scope="col">Error</th>
                                                        <th scope="col">Image</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td colspan="12" class="text-center fw-bold text-dark tag-notice">Click search to show data</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="my-3 text-center">
                                        <button class="btn btn-warning form-search-btn-load-more" disabled>Load more</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="form-setting">
                <i class="fa fa-cog icon-form-setting" style="margin-left: 10px;cursor: pointer" aria-hidden="true" data-toggle="modal" data-target="#modalSetting"></i>

                <div class="modal fade" id="modalSetting" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-xl" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4 class="modal-title fw-bold" style="font-size: 18px;" id="exampleModalLabel">Setting</h4>
                                <button type="button" class="btn close" data-dismiss="modal" aria-label="Close">
                                    X
                                </button>
                            </div>

                            <div class="modal-body" style="padding-bottom: 2em;">
                                <div>
                                    <div class="d-flex align-items-center">
                                        <span style="font-weight: bold;font-size: 18px;margin-right: 15px;">Model:</span>
                                        <label style="font-size: 18px;margin-right: 5px;" for="mode_master">Master</label>
                                        <input type="radio" name="mode_run" value="1" class="mr-3 mode-run" style="margin-right: 20px" id="mode_master" @(currentMode == 1 ? "checked" : "") />

                                        <label style="font-size: 18px;margin-right: 5px;" for="mode_normal">Normal</label>
                                        <input type="radio" class="mode-run" name="mode_run" value="2" id="mode_normal" style="margin-right: 20px" @(currentMode == 2 ? "checked" : "") />


                                        <label style="font-size: 18px;margin-right: 5px;" for="mode_audit">Audit</label>
                                        <input type="radio" class="mode-run" name="mode_run" value="3" id="mode_audit" @(currentMode == 3 ? "checked" : "") />
                                    </div>
                                </div>

                                <div class="mt-4">
                                    <span style="font-weight: bold;font-size: 18px;margin-bottom: 10px;display: inline-block">Reset cam</span>
                                    <div class="d-flex align-items-center ">
                                        <button data-client="1" style="margin-right: 15px" class="btn btn-primary btn-reset-cam" id="btn-reset-cam-1">Reset Cam Client 1</button>
                                        <button data-client="2" style="margin-right: 15px" class="btn btn-primary btn-reset-cam" id="btn-reset-cam-2">Reset Cam Client 2</button>
                                        <button data-client="3" style="margin-right: 15px" class="btn btn-primary btn-reset-cam" id="btn-reset-cam-3">Reset Cam Client 3</button>
                                        <button data-client="4" style="margin-right: 15px" class="btn btn-primary btn-reset-cam" id="btn-reset-cam-4">Reset Cam Client 4</button>
                                    </div>
                                </div>
                                <div>
                                    <form asp-action="DeleteAllData" asp-controller="Home" method="post">
                                        <div class="mt-5" style="border-top: none; text-align:right;">
                                            <button type="submit" class="btn btn-danger button-delete-all-data">Delete All Data</button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    }
    else
    {
        <button class="ml-4 btn btn-primary" style="margin-left: 3em" onclick="location.reload();">Refresh Data</button>
    }
</div>